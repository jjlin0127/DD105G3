<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>發表話題 | 天然甘</title>
    <link rel="shortcut icon" href="./images/shortIcon.png">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.16/dist/summernote-lite.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/page/forum/forum_post.css">
</head>
<body>
    @@include('layout/header.html',{
        "focus06" : "focus"
    })
    <div class="wrapper_post">
        <div class="post_container">
            <div class="post_area">
                <div class="cancel_post">
                    <button class="cancel_post_btn" onclick="location.href='forum.html'">取消發表</button>
                </div>
                <form method="post" class="post_form" name="post_form">
                    <div class="set_post_title">
                        <label for="post_title">標題</label>
                        <input type="text" name="post_title" id="post_title" autofocus>
                    </div>

                    <p>選擇話題種類 (請選擇1項)</p>
                    <div class="options_set set_post_topic"> 
                        <div class="option">
                            <input type="radio" name="set_topic_option" id="digestion">
                            <label for="digestion">幫助消化</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="set_topic_option" id="cvd">
                            <label for="cvd">保護血管</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="set_topic_option" id="brain">
                            <label for="brain">活化大腦</label>
                        </div>
                    </div>

                    <p>選擇果甘種類 (最多選擇6項)</p>
                    <div class="options_set set_post_fruit">
                        <div class="option">
                            <input type="checkbox" name="set_fruit_option" id="star">
                            <label for="star">楊桃</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" name="set_fruit_option" id="pineapple">
                            <label for="pineapple">鳳梨</label>
                        </div>                           
                        <div class="option">
                            <input type="checkbox" name="set_fruit_option" id="dragon">
                            <label for="dragon">火龍果</label>
                        </div>
                        <div class="option">                                    
                            <input type="checkbox" name="set_fruit_option" id="banana">
                            <label for="banana">香蕉</label>
                        </div>
                        <div class="option">                                   
                            <input type="checkbox" name="set_fruit_option" id="strawberry">
                            <label for="strawberry">草莓</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" name="set_fruit_option" id="guava">
                            <label for="guava">芭樂</label>
                        </div>
                        <div class="option">                                   
                            <input type="checkbox" name="set_fruit_option" id="mango">
                            <label for="mango">芒果</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" name="set_fruit_option" id="appale">
                            <label for="appale">蘋果</label>
                        </div>
                        <div class="option">
                            <input type="checkbox" name="set_fruit_option" id="blueberry">
                            <label for="blueberry">藍莓</label>
                        </div>
                    </div>
                    <textarea id="summernote" name="editordata"></textarea>
                    <div class="post_btns">
                        <button type="submit" class="post_submit_btn">發表話題</button>
                        <button type="reset" class="post_reset_btn">清除重填</button>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- alert start -->
        <div id="alertBox" class="alertBox hidden">
            <span id="close_alert_btn">&times;</span>
            <span id="alertMessage">最多選擇6樣！</span>
          </div>
        <!-- alert end -->
    </div>
    
    @@include('./layout/footer.html')
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.js"></script> 
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.16/dist/summernote-lite.min.js"></script>
    <script src="https://use.fontawesome.com/releases/v5.10.1/js/all.js"></script>
    <script>
        $('#summernote').summernote({
          placeholder: '今天想分享什麼呢？',
          tabsize: 2,
          minHeight: 300,
          toolbar: [
            ['style', ['style']],
            ['font', ['bold', 'underline', 'clear']],
            ['color', ['color']],
            ['para', ['ul', 'ol', 'paragraph']],
            ['table', ['table']],
            ['insert', ['link', 'picture', 'video']],
            ['view', ['fullscreen', 'codeview', 'help']]
          ]
        });
      </script>
      <script>
          function doFirst(){
              checkBoxGroup = document.forms['post_form']['set_fruit_option'];			
              for (let i=0; i<checkBoxGroup.length; i++){
                  checkBoxGroup[i].addEventListener('click', checkBoxLimit);
              }
          }

          function checkBoxLimit(){
              let alertBox = document.getElementById('alertBox');
              let alertMessage = document.getElementById('alertMessage');
              let close_alert_btn = document.getElementById('close_alert_btn');
              let limit = 6;
              let checkedcount = 0;
              
              for (let j=0; j<checkBoxGroup.length; j++){
                  checkedcount += (checkBoxGroup[j].checked) ? 1 : 0;
              }

              if (checkedcount > limit) {
                  alertBox.classList.remove('hidden');					
                  this.checked = false;

                  close_alert_btn.addEventListener('click', function(){
                      alertBox.classList.add('hidden');
                  });
                  
                  setTimeout(function(){
                      alertBox.classList.add('hidden');
                  }, 2500);
              }
          }

          window.addEventListener('load', doFirst);
      </script>
</body>
</html>